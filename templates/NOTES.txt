CHART NAME: {{ .Chart.Name }}
CHART VERSION: {{ .Chart.Version }}
APP VERSION: {{ .Chart.AppVersion }}

** Valkey has been deployed successfully **

{{- if eq .Values.architecture "standalone" }}

Valkey is available at:
    {{ include "valkey.fullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.clusterDomain | default "cluster.local" }}:{{ .Values.standalone.service.port }}

{{- if include "valkey.auth.enabled" . }}
Get password: kubectl get secret {{ include "valkey.secretName" . }} -n {{ .Release.Namespace }} -o jsonpath="{.data.{{ include "valkey.secretPasswordKey" . }}}" | base64 -d
{{- end }}

Connect: kubectl run valkey-client --restart=Never --image={{ include "valkey.image" . }} -n {{ .Release.Namespace }} --command -- sleep infinity
Then: kubectl exec -it valkey-client -n {{ .Release.Namespace }} -- valkey-cli -h {{ include "valkey.fullname" . }} -p {{ .Values.standalone.service.port }}{{- if include "valkey.auth.enabled" . }} -a $VALKEY_PASSWORD{{- end }}

{{- else }}

Valkey Master: {{ include "valkey.master.serviceName" . }}.{{ .Release.Namespace }}.svc.{{ .Values.clusterDomain | default "cluster.local" }}:{{ .Values.master.service.port }}
Valkey Replica: {{ include "valkey.replica.serviceName" . }}.{{ .Release.Namespace }}.svc.{{ .Values.clusterDomain | default "cluster.local" }}:{{ .Values.replica.service.port }}

{{- if include "valkey.auth.enabled" . }}
Get password: kubectl get secret {{ include "valkey.secretName" . }} -n {{ .Release.Namespace }} -o jsonpath="{.data.{{ include "valkey.secretPasswordKey" . }}}" | base64 -d
{{- end }}

{{- end }}